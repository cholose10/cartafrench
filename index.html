<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Carta - Tilo Caf√©</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; background:#f7f3f0; color:#333;}
    header img { width: 100%; height: 220px; object-fit: cover; display: block; }
    h1 { text-align:center; padding:15px; color:#806250; margin-top:60px; }

    /* Buscador fijo arriba */
    #searchBar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background:#fff;
      padding:10px;
      box-shadow:0 2px 5px rgba(0,0,0,0.1);
      z-index:1000;
    }
    #searchInput {
      width:100%;
      padding:12px;
      border:2px solid #806250;
      border-radius:8px;
      font-size:16px;
    }

    /* Categor√≠as */
    nav { 
      display:grid; 
      grid-template-columns: repeat(auto-fit,minmax(150px,1fr)); 
      gap:10px; 
      padding:15px; 
      margin-top:10px;
    }
    nav button { 
      padding:15px; 
      border:none; 
      border-radius:12px; 
      background:#806250; 
      color:#fff; 
      cursor:pointer; 
      font-size:16px; 
      font-weight:bold;
      transition:0.2s;
    }
    nav button:hover { background:#a67c52; }

    /* Productos */
    #product-list { 
      display:grid; 
      grid-template-columns: repeat(auto-fit,minmax(200px,1fr)); 
      gap:15px; 
      padding:20px; 
    }
    .item { 
      background:#fff; 
      padding:15px; 
      border-radius:10px; 
      box-shadow:0 2px 5px rgba(0,0,0,0.1); 
      text-align:center; 
    }
    .item img { 
      width:100%; 
      height:150px; 
      object-fit:cover; 
      border-radius:8px; 
    }
    .price { 
      display:block; 
      margin-top:10px; 
      font-weight:bold; 
      color:#806250; 
      font-size:18px;
    }
    .no-results { 
      grid-column:1/-1; 
      text-align:center; 
      font-size:1.2rem; 
      color:#806250; 
      padding:20px; 
    }

    /* Responsivo */
    @media (max-width:600px){
      nav { grid-template-columns: 1fr; }
      nav button { font-size:18px; padding:18px; }
    }
  </style>
</head>
<body>
  <header>
    <img src="img/french99.jpg" alt="Tilo Caf√©" />
  </header>

  <!-- Buscador fijo -->
  <div id="searchBar">
    <input type="text" id="searchInput" placeholder="üîç Buscar productos...">
  </div>

  <h1>Men√∫</h1>

  <!-- Categor√≠as -->
  <nav>
    <button onclick="renderProducts('Todos')">Todos</button>
    <button onclick="renderProducts('CAFETER√çA')">Cafeter√≠a</button>
    <button onclick="renderProducts('COMIDAS')">Comidas</button>
    <button onclick="renderProducts('POSTRES')">Postres</button>
    <button onclick="renderProducts('REFRESCOS')">Refrescos</button>
    <button onclick="renderProducts('VINOS Y TRAGOS')">Vinos y Tragos</button>
  </nav>

  <!-- Lista de productos -->
  <div id="product-list"></div>

  <script>
    let productos = [];
    let categoriaActual = 'Todos';

    // Cargar productos desde JSON
    fetch('productos.json')
      .then(response => response.json())
      .then(data => {
        productos = data;
        renderProducts('Todos');
      });

    // Renderizar productos
    function renderProducts(categoria, terminoBusqueda = '') {
      categoriaActual = categoria;
      const container = document.getElementById('product-list');
      container.innerHTML = '';

      // Filtrar por categor√≠a
      let filtrados = categoria === 'Todos' 
        ? productos 
        : productos.filter(p => p.categoria === categoria);

      // Filtrar por b√∫squeda
      if (terminoBusqueda.trim() !== '') {
        const palabras = terminoBusqueda.toLowerCase().split(/\s+/);
        filtrados = filtrados.filter(p => {
          const texto = (p.nombre + " " + p.descripcion + " " + p.categoria).toLowerCase();
          return palabras.every(pal => texto.includes(pal));
        });
      }

      // Si no hay resultados
      if (filtrados.length === 0) {
        container.innerHTML = `<div class="no-results">‚ö†Ô∏è No se encontraron productos</div>`;
        return;
      }

      // Mostrar productos filtrados
      filtrados.forEach(p => {
        const item = document.createElement('div');
        item.className = 'item';
        const priceDisplay = (String(p.precio||'').trim().startsWith('$'))
          ? String(p.precio).trim()
          : ('$' + (p.precio ?? ''));
        item.innerHTML = `
          <img src="${p.imagen}" alt="${p.nombre}">
          <h3>${p.nombre}</h3>
          <p>${p.descripcion}</p>
          <span class="price">${priceDisplay}</span>
        `;
        container.appendChild(item);
      });
    }

    // Buscador en vivo
    document.getElementById('searchInput').addEventListener('input', function() {
      renderProducts(categoriaActual, this.value);
    });
  </script>
</body>
</html>
